<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             684453ffd43c2             |
    |_______________________________________|
*/
 namespace Pmpr\Module\WoocommerceInvoice\Email; use Pmpr\Common\Foundation\Functions\Traits\HelperTrait; use Pmpr\Common\Foundation\Functions\Traits\WrapperTrait; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Common\Foundation\Template\Traits\TemplateTrait; use Pmpr\Common\Foundation\Traits\HookTrait; use WC_Email; class Customer extends WC_Email { const iaymqwiukuokuwmi = '{order_date}'; const kkqewaoosgccwoyq = '{order_number}'; use HookTrait, HelperTrait, WrapperTrait, TemplateTrait; public function __construct() { $this->id = 'pr_woocommerce_customer_invoice'; $this->enabled = true; $this->customer_email = true; $this->title = __('Customer PDF invoice', PR__MDL__WOOCOMMERCE_INVOICE); $this->description = __('Email for customer with order details and PDF invoice attached.', PR__MDL__WOOCOMMERCE_INVOICE); $this->placeholders = [self::iaymqwiukuokuwmi => '', self::kkqewaoosgccwoyq => '']; $this->uwkmaywceaaaigwo()->mmsykuomogaqoaye()->qcsmikeggeemccuu('pdf_invoice_send_customer_invoice_notification', [$this, 'kgimeakisikksgce']); parent::__construct(); WC_Email::__construct(); $this->manual = false; } public function kgimeakisikksgce($umwqusowiqmyseom) { $iiwwoeukeeweaisc = $this->caokeucsksukesyo()->mmmcswscsiecscwg()->get($umwqusowiqmyseom); if ($iiwwoeukeeweaisc) { $this->object = $iiwwoeukeeweaisc; $this->recipient = $iiwwoeukeeweaisc->get_billing_email(); $this->placeholders[self::iaymqwiukuokuwmi] = wc_format_datetime($iiwwoeukeeweaisc->get_date_created()); $this->placeholders[self::kkqewaoosgccwoyq] = $iiwwoeukeeweaisc->get_order_number(); if ($acuayeeoiwokyomo = $this->get_recipient()) { $iosuwkkwwioumeqg = $this->get_subject(); $ewgwqamkygiqaawc = $this->get_content(); $uykgysuswksgmwqy = $this->get_headers(); $aieaqakyuyewkkwe = $this->get_attachments(); $this->send($acuayeeoiwokyomo, $iosuwkkwwioumeqg, $ewgwqamkygiqaawc, $uykgysuswksgmwqy, $aieaqakyuyewkkwe); } } $this->restore_locale(); } public function get_default_subject() { return __('Your invoice for order #{order_number} on {site_title} is attached', PR__MDL__WOOCOMMERCE_INVOICE); } public function get_default_heading() { return __('Your invoice for order #{order_number} is attached', PR__MDL__WOOCOMMERCE_INVOICE); } public function get_subject() { $iosuwkkwwioumeqg = $this->get_option('subject', $this->get_default_subject()); return $this->format_string($iosuwkkwwioumeqg); } public function get_heading() { $iuimqckcgwwkgygo = $this->get_option('heading', $this->get_default_heading()); return $this->format_string($iuimqckcgwwkgygo); } public function get_parameters() : array { $umwqusowiqmyseom = $this->caokeucsksukesyo()->mmmcswscsiecscwg()->get($this->object); $qookweymeqawmcwo = []; if ($umwqusowiqmyseom) { if ($umwqusowiqmyseom->has_status(Constants::sgoswgskyiiwkyuo)) { $iwywmkygwewiamwm = $this->caokeucsksukesyo()->wgqqgewcmcemoewo()->yuawgssgauywkiia(__('Pay for this order', PR__MDL__WOOCOMMERCE_INVOICE), $umwqusowiqmyseom->get_checkout_payment_url()); $uamcoiueqaamsqma = sprintf(__('An order has been created for you on %1$s. Your invoice is below, with a link to make payment when youâ€™re ready: %2$s', PR__MDL__WOOCOMMERCE_INVOICE), get_bloginfo('name', 'display'), $iwywmkygwewiamwm); } else { $uamcoiueqaamsqma = sprintf(__('Here are the details of your order placed on %s:', PR__MDL__WOOCOMMERCE_INVOICE), wc_format_datetime($umwqusowiqmyseom->get_date_created())); } $qookweymeqawmcwo = [Constants::muqaqimusmckkieq => $this, Constants::awkcoioakcaougmq => $umwqusowiqmyseom, Constants::eoskkkieowogacws => $uamcoiueqaamsqma, 'plain_text' => false, 'sent_to_admin' => false, 'email_heading' => $this->get_heading(), 'hello_message' => sprintf(__('Hi %s', PR__MDL__WOOCOMMERCE_INVOICE), $umwqusowiqmyseom->get_billing_first_name()), 'additional_content' => $this->get_additional_content()]; } return $qookweymeqawmcwo; } public function get_default_additional_content() { return __('Thanks for using {site_address}!', PR__MDL__WOOCOMMERCE_INVOICE); } public function get_content_html() { return $this->iuygowkemiiwqmiw('index', $this->get_parameters()); } public function get_content_plain() { return $this->iuygowkemiiwqmiw('plain', $this->get_parameters()); } public function init_form_fields() { $kqmcoiicsmgwaisg = array_keys($this->placeholders); foreach ($kqmcoiicsmgwaisg as $momcykaoccoymeig => $iwiewowoqmoekyqi) { $kqmcoiicsmgwaisg[$momcykaoccoymeig] = $this->caokeucsksukesyo()->wgqqgewcmcemoewo()->uuccukgasskgimsq('code', [], $iwiewowoqmoekyqi); } $ygoqmwaqmooosysc = sprintf(__('Available placeholders: %s', PR__MDL__WOOCOMMERCE_INVOICE), implode(', ', $kqmcoiicsmgwaisg)); $this->form_fields = ['enabled' => [Constants::squoamkioomemiyi => 'checkbox', Constants::uissasisiuymwsmu => __('Enable this email notification', PR__MDL__WOOCOMMERCE_INVOICE), Constants::qescuiwgsyuikume => __('Enable/Disable', PR__MDL__WOOCOMMERCE_INVOICE), Constants::wikgqsqysyuoykse => 'yes'], 'subject' => ['desc_tip' => true, Constants::squoamkioomemiyi => 'text', Constants::qescuiwgsyuikume => __('Subject', PR__MDL__WOOCOMMERCE_INVOICE), Constants::wikgqsqysyuoykse => '', Constants::moacsmsigegyweoc => $this->get_default_subject(), Constants::eqkeooqcsscoggia => $ygoqmwaqmooosysc], 'heading' => ['desc_tip' => true, Constants::squoamkioomemiyi => 'text', Constants::qescuiwgsyuikume => __('Email heading', PR__MDL__WOOCOMMERCE_INVOICE), Constants::moacsmsigegyweoc => $this->get_default_heading(), Constants::eqkeooqcsscoggia => $ygoqmwaqmooosysc], 'subject_paid' => ['desc_tip' => true, Constants::squoamkioomemiyi => 'text', Constants::qescuiwgsyuikume => __('Subject (paid)', PR__MDL__WOOCOMMERCE_INVOICE), Constants::eqkeooqcsscoggia => $ygoqmwaqmooosysc, Constants::moacsmsigegyweoc => $this->get_default_subject()], 'heading_paid' => ['desc_tip' => true, Constants::squoamkioomemiyi => 'text', Constants::qescuiwgsyuikume => __('Email heading (paid)', PR__MDL__WOOCOMMERCE_INVOICE), Constants::eqkeooqcsscoggia => $ygoqmwaqmooosysc, Constants::moacsmsigegyweoc => $this->get_default_heading()], 'additional_content' => ['css' => 'width:400px; height: 75px;', 'desc_tip' => true, Constants::squoamkioomemiyi => 'textarea', Constants::qescuiwgsyuikume => __('Additional content', PR__MDL__WOOCOMMERCE_INVOICE), Constants::wikgqsqysyuoykse => $this->get_default_additional_content(), Constants::eqkeooqcsscoggia => __('Text to appear below the main email content.', PR__MDL__WOOCOMMERCE_INVOICE) . ' ' . $ygoqmwaqmooosysc, Constants::moacsmsigegyweoc => __('N/A', PR__MDL__WOOCOMMERCE_INVOICE)], 'email_type' => ['class' => 'email_type wc-enhanced-select', 'desc_tip' => true, Constants::squoamkioomemiyi => 'select', Constants::qescuiwgsyuikume => __('Email type', PR__MDL__WOOCOMMERCE_INVOICE), Constants::wikgqsqysyuoykse => 'html', Constants::aeweusomuikewuis => $this->get_email_type_options(), Constants::eqkeooqcsscoggia => __('Choose which format of email to send.', PR__MDL__WOOCOMMERCE_INVOICE)]]; } }
